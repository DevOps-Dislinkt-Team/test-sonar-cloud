# Set the language
language: node_js

# Set the Node version
node_js:
  - '14.17.4'

services:
  # Use Docker command line
  # - docker

install:
  # Install dependencies for tests
  - npm ci

addons:
  sonarcloud:
    organization: 'devops-dislinkt-team'
    token:
      secure: 'd3053bd9a8b525719f3184574454862183f8ece2'

before_script:
  # Start server and client for tests
  - npm run dev &

script:
  # Run tests
  # - npm run test
  - sonar-scanner

branches:
  only:
    - main
    - develop
