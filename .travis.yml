# Set the language
language: node_js

# Set the Node version
node_js:
  - '14.17.4'

services:
  # Use Docker command line
  # - docker

install:
  # Install dependencies for tests
  - npm ci

addons:
  sonarcloud:
    organization: 'devops-dislinkt-team'
    token:
      secure: '87ad7784d968d7ed2a78f8d5c280d9d7ce7bacee'

before_script:
  # Start server and client for tests
  - npm run dev &

script:
  # Run tests
  # - npm run test
  - sonar-scanner -X

branches:
  only:
    - main
    - develop
